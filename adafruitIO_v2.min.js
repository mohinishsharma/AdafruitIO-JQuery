function msAdafruitIO(a,b){this.API_V="v2",this.AIO_USERNAME=a,this.AIO_KEY=b,this.sub_feed=[],this.AIO_content_type="application/json",this.API_URL="https://io.adafruit.com/api/"+this.API_V+"/"+this.AIO_USERNAME,this.get_API_version=function(){return this.API_V},this.get_Username=function(){return this.AIO_USERNAME},this.feed_monitored_now=function(){return this.sub_feed},this.monitor_feed=function(c){if("#"==c){throw"Cannot monitor all feed at once"}return msAIOClient.subscribe(this.AIO_USERNAME+"/feeds/"+c),this.sub_feed.push(c),"Monitoring feed ("+c+")"},this.stop_monitor_feed=function(c="#"){return"#"==c?(this.sub_feed.forEach(d=>{msAIOClient.unsubscribe(this.AIO_USERNAME+"/feeds/"+d),this.sub_feed.splice($.inArray(d,this.sub_feed),1)}),"Not Monitoring anything"):(msAIOClient.unsubscribe(this.AIO_USERNAME+"/feeds/"+c),this.sub_feed.splice($.inArray(c,this.sub_feed),1),"Not Monitoring feed ("+c+")")},this.msaio_connect=function(c={onConnectionLost:onConnectionLost,onMessageArrived:onMessageArrived,onConnect:onConnect}){var d={hostname:"io.adafruit.com",port:443};msAIOClient=new Paho.MQTT.Client(d.hostname,+d.port,"msAdafruitIO_"+Math.random().toString),msAIOClient.onConnectionLost=null==c.onConnectionLost?this.AIO_conc_lost:c.onConnectionLost,msAIOClient.onMessageArrived=null==c.onMessageArrived?this.AIO_feed_note:c.onMessageArrived,msAIOClient.connect({onSuccess:null==c.onConnect?this.AIO_onConnect:c.onConnect,userName:this.AIO_USERNAME,password:this.AIO_KEY})},this.msaio_disconnect=function(){msAIOClient.disconnect()},this.get_user_info=function(c=this.AIO_def_callback){var d=new XMLHttpRequest;d.onreadystatechange=function(){var e;4==this.readyState&&200==this.status?(e=JSON.parse(this.responseText),c(e)):4==this.readyState&&404==this.status&&(e=null,c(e))},d.open("GET","https://io.adafruit.com/api/"+this.API_V+"/user",!0),d.setRequestHeader("X-AIO-Key",this.AIO_KEY),d.setRequestHeader("content-type",this.AIO_content_type),d.send()},this.get_feed=function(c=null,d=this.AIO_def_callback){var e=new XMLHttpRequest;e.onreadystatechange=function(){var f;4==this.readyState&&200==this.status?(f=JSON.parse(this.responseText),d(f)):4==this.readyState&&404==this.status&&(f=null,d(f))};var c=null==c?"":"/"+c;e.open("GET",this.API_URL+"/feeds"+c,!0),e.setRequestHeader("X-AIO-Key",this.AIO_KEY),e.setRequestHeader("content-type",this.AIO_content_type),e.send()},this.create_feed=function(c,d,e,f=this.AIO_def_callback){var g=JSON.stringify({name:c,key:d,description:e,license:"msAdafruitIO_"+Math.random()}),h=new XMLHttpRequest;h.onreadystatechange=function(){var i;4==this.readyState&&200==this.status?(i=JSON.parse(this.responseText),f(i)):4==this.readyState&&404==this.status&&(i=null,f(i))},h.open("POST",this.API_URL+"/feeds",!0),h.setRequestHeader("X-AIO-Key",this.AIO_KEY),h.setRequestHeader("content-type",this.AIO_content_type),h.send(g)},this.replace_feed=function(c,d,e,f,g=this.AIO_def_callback){var h=JSON.stringify({name:d,key:e,description:f,license:"msAdafruitIO_"+Math.random()}),i=new XMLHttpRequest;i.onreadystatechange=function(){var j;4==this.readyState&&200==this.status?(j=JSON.parse(this.responseText),g(j)):4==this.readyState&&404==this.status&&(j=null,g(j))};var c=null==c?"":"/"+c;i.open("PUT",this.API_URL+"/feeds"+c,!0),i.setRequestHeader("X-AIO-Key",this.AIO_KEY),i.setRequestHeader("content-type",this.AIO_content_type),i.send(h)},this.delete_feed=function(c,d=this.AIO_def_callback){var e=new XMLHttpRequest;e.onreadystatechange=function(){var f;4==this.readyState&&200==this.status?(f=JSON.parse(this.responseText),d(f)):4==this.readyState&&404==this.status&&(f=null,d(f))},e.open("DELETE",this.API_URL+"/feeds/"+c,!0),e.setRequestHeader("X-AIO-Key",this.AIO_KEY),e.setRequestHeader("content-type",this.AIO_content_type),e.send()},this.get_feed_data=function(c,d=null,e=this.AIO_def_callback){var f=new XMLHttpRequest;f.onreadystatechange=function(){var g;4==this.readyState&&200==this.status?(g=JSON.parse(this.responseText),e(g)):4==this.readyState&&404==this.status&&(g=null,e(g))};var d=null==d?"":"/"+d;f.open("GET",this.API_URL+"/feeds/"+c+"/data"+d,!0),f.setRequestHeader("X-AIO-Key",this.AIO_KEY),f.setRequestHeader("content-type",this.AIO_content_type),f.send()},this.send_feed_data=function(c,d={value:value,created_at:created_at,lat:lat=null,lon:lon=null,ele:ele=null,epoch:epoch=0},e=this.AIO_def_callback){var f=new XMLHttpRequest;f.onreadystatechange=function(){var g;4==this.readyState&&200==this.status?(g=JSON.parse(this.responseText),e(g)):4==this.readyState&&404==this.status&&(g=null,e(g))},f.open("POST",this.API_URL+"/feeds/"+c+"/data",!0),f.setRequestHeader("X-AIO-Key",this.AIO_KEY),f.setRequestHeader("content-type",this.AIO_content_type),f.send(JSON.stringify(d))},this.AIO_def_callback=function(c){return console.log(c),JSON.stringify(c)},this.AIO_onConnect=function(){console.log("Connected")},this.AIO_conc_lost=function(c){0!==c.errorCode&&console.log("onConnectionLost:"+c.errorMessage)},this.AIO_feed_note=function(c){var d=c.destinationName.split("/")[2],e=c.payloadString;console.log({feed_key:d,value:e})}}